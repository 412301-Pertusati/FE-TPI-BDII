<div class="w-full bg-gray-50 rounded-lg overflow-hidden">
  <mat-tab-group (selectedTabChange)="onTabChange($event)">
    
    <!-- Tab de Prendas -->
    <mat-tab label="Prendas">
      <div class="p-4 md:p-6 relative" (window:resize)="onResize()">
        
        <!-- Mensaje si no hay prendas favoritas -->
        <div *ngIf="prendasFavoritas.length === 0" class="text-center py-12">
          <mat-icon class="text-6xl text-gray-400 mb-4">favorite_border</mat-icon>
          <h3 class="text-xl text-gray-600 mb-2">No tienes prendas favoritas</h3>
          <p class="text-gray-500">Marca algunas prendas como favoritas para verlas aquí</p>
        </div>

        <!-- Carrusel de prendas -->
        <div *ngIf="prendasFavoritas.length > 0">
          <div class="flex items-center gap-4 mb-5">
            <button 
              mat-icon-button 
              class="flex-shrink-0 w-12 h-12 bg-gray-100 hover:bg-gray-200 transition-all duration-300 rounded-full disabled:opacity-30 disabled:cursor-not-allowed hover:scale-110"
              [disabled]="!canGoPrevPrendas"
              (click)="prevSlidePrendas()"
            >
              <mat-icon>chevron_left</mat-icon>
            </button>
            
            <div class="flex-1 overflow-hidden rounded-lg shadow-md bg-gradient-to-br from-gray-50 to-blue-50 p-4">
              <div class="flex transition-transform duration-500 ease-out gap-4"
                   [style.transform]="'translateX(-' + (currentIndexPrendas * (100 / itemsPerViewPrendas)) + '%)'">
                
                <mat-card 
                  *ngFor="let prenda of prendasFavoritas; trackBy: trackByPrenda" 
                  class="flex-shrink-0 max-w-[350px] transform transition-all duration-300 hover:-translate-y-1 hover:shadow-lg"
                  [ngClass]="{
                    'w-full': itemsPerViewPrendas === 1,
                    'w-[calc(50%-8px)]': itemsPerViewPrendas === 2,
                    'w-[calc(33.333%-11px)]': itemsPerViewPrendas === 3
                  }"
                >
                  <mat-card-header class="relative justify-between">
                    <mat-card-title>{{prenda.tipo}}</mat-card-title>
                    <mat-card-subtitle>{{prenda.estilo}} - {{prenda.color}}</mat-card-subtitle>
                    <button 
                      mat-icon-button 
                      (click)="onToggleFavoritoPrenda(prenda)" 
                      class="absolute top-2 right-2 bg-white bg-opacity-90 backdrop-blur-sm"
                    >
                      <mat-icon [ngClass]="{'text-pink-600': prenda.favorite}">
                        {{prenda.favorite ? 'favorite' : 'favorite_border'}}
                      </mat-icon>
                    </button>
                  </mat-card-header>

                  <img 
                    mat-card-image 
                    [src]="prenda.urlFoto" 
                    [alt]="prenda.tipo"
                    class="h-48 object-cover"
                  >

                  <mat-card-content>
                    <div class="mt-3">
                      <mat-chip-set>
                        <mat-chip 
                          class="mr-2 mb-1"
                        >
                          {{prenda.estacion}}
                        </mat-chip>
                      </mat-chip-set>
                    </div>
                  </mat-card-content>

                 
                </mat-card>
                
              </div>
            </div>
            
            <button 
              mat-icon-button 
              class="flex-shrink-0 w-12 h-12 bg-gray-100 hover:bg-gray-200 transition-all duration-300 rounded-full disabled:opacity-30 disabled:cursor-not-allowed hover:scale-110"
              [disabled]="!canGoNextPrendas"
              (click)="nextSlidePrendas()"
            >
              <mat-icon>chevron_right</mat-icon>
            </button>
          </div>
          
          <!-- Indicadores de posición para prendas -->
          <div class="flex justify-center gap-2 mt-5" *ngIf="prendasFavoritas.length > itemsPerViewPrendas">
            <button 
              *ngFor="let slide of [].constructor(totalSlidesPrendas); let i = index"
              class="w-3 h-3 rounded-full border-0 transition-all duration-300 cursor-pointer"
              [ngClass]="{
                'bg-blue-500 transform scale-110': i === (currentSlidePrendas - 1),
                'bg-gray-300 hover:bg-gray-400': i !== (currentSlidePrendas - 1)
              }"
              (click)="goToSlidePrendas(i * itemsPerViewPrendas)"
            ></button>
          </div>
          
          <!-- Contador de elementos para prendas -->
          <div class="text-center mt-4 text-sm text-gray-600">
            Mostrando {{currentIndexPrendas + 1}}-{{Math.min(currentIndexPrendas + itemsPerViewPrendas, prendasFavoritas.length)}} 
            de {{prendasFavoritas.length}} prendas favoritas
          </div>
        </div>
        
      </div>
    </mat-tab>

    <!-- Tab de Outfits -->
    <mat-tab label="Outfits">
      <div class="p-4 md:p-6 relative" (window:resize)="onResize()">
        
        <!-- Mensaje si no hay outfits favoritos -->
        <div *ngIf="outfitsFavoritos.length === 0" class="text-center py-12">
          <mat-icon class="text-6xl text-gray-400 mb-4">favorite_border</mat-icon>
          <h3 class="text-xl text-gray-600 mb-2">No tienes outfits favoritos</h3>
          <p class="text-gray-500">Marca algunos outfits como favoritos para verlos aquí</p>
        </div>

        <!-- Carrusel de outfits -->
        <div *ngIf="outfitsFavoritos.length > 0">
          <div class="flex items-center gap-4 mb-5">
            <button 
              mat-icon-button 
              class="flex-shrink-0 w-12 h-12 bg-gray-100 hover:bg-gray-200 transition-all duration-300 rounded-full disabled:opacity-30 disabled:cursor-not-allowed hover:scale-110"
              [disabled]="!canGoPrevOutfits"
              (click)="prevSlideOutfits()"
            >
              <mat-icon>chevron_left</mat-icon>
            </button>
            
            <div class="flex-1 overflow-hidden rounded-lg shadow-md bg-gradient-to-br from-gray-50 to-purple-50 p-4">
              <div class="flex transition-transform duration-500 ease-out gap-4"
                   [style.transform]="'translateX(-' + (currentIndexOutfits * (100 / itemsPerViewOutfits)) + '%)'">
                
                <mat-card 
                  *ngFor="let outfit of outfitsFavoritos; trackBy: trackByOutfit" 
                  class="flex-shrink-0 max-w-[350px] transform transition-all duration-300 hover:-translate-y-1 hover:shadow-lg"
                  [ngClass]="{
                    'w-full': itemsPerViewOutfits === 1,
                    'w-[calc(50%-8px)]': itemsPerViewOutfits === 2,
                    'w-[calc(33.333%-11px)]': itemsPerViewOutfits === 3
                  }"
                >
                  <mat-card-header class="relative">
                    <mat-card-title>Outfit #{{outfit.id}}</mat-card-title>
                    <mat-card-subtitle>{{outfit.outfit.length}} prendas</mat-card-subtitle>
                    <button 
                      mat-icon-button 
                      (click)="onToggleFavoritoOutfit(outfit)" 
                      class="absolute top-2 right-2 bg-white bg-opacity-90 backdrop-blur-sm"
                    >
                      <mat-icon [ngClass]="{'text-pink-600': outfit.favorite}">
                        {{outfit.favorite ? 'favorite' : 'favorite_border'}}
                      </mat-icon>
                    </button>
                  </mat-card-header>

                  <mat-card-content>
                    <div class="grid grid-cols-2 gap-2 mt-3">
                      <div 
                        *ngFor="let prenda of outfit.outfit.slice(0, 4); let i = index" 
                        class="relative"
                      >
                        <img 
                          [src]="prenda.urlFoto || '/placeholder.svg?height=80&width=80'" 
                          [alt]="prenda.tipo"
                          class="w-full h-20 object-cover rounded"
                        >
                        <div *ngIf="i === 3 && outfit.outfit.length > 4" 
                             class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded">
                          <span class="text-white text-sm font-bold">+{{outfit.outfit.length - 4}}</span>
                        </div>
                      </div>
                    </div>
                    
                    <div class="mt-3">
                      <div class="flex flex-wrap gap-1">
                        <span 
                          *ngFor="let prenda of outfit.outfit.slice(0, 3)" 
                          class="text-xs bg-gray-200 px-2 py-1 rounded"
                        >
                          {{prenda.tipo}}
                        </span>
                        <span *ngIf="outfit.outfit.length > 3" class="text-xs text-gray-500">
                          +{{outfit.outfit.length - 3}} más
                        </span>
                      </div>
                    </div>
                  </mat-card-content>

                  <mat-card-actions>
                    <button mat-button (click)="onEditarOutfit(outfit)" class="flex items-center">
                      <mat-icon class="mr-1">edit</mat-icon>
                      Editar
                    </button>
                    <button mat-button color="warn" (click)="onEliminarOutfit(outfit)" class="flex items-center">
                      <mat-icon class="mr-1">delete</mat-icon>
                      Eliminar
                    </button>
                  </mat-card-actions>
                </mat-card>
                
              </div>
            </div>
            
            <button 
              mat-icon-button 
              class="flex-shrink-0 w-12 h-12 bg-gray-100 hover:bg-gray-200 transition-all duration-300 rounded-full disabled:opacity-30 disabled:cursor-not-allowed hover:scale-110"
              [disabled]="!canGoNextOutfits"
              (click)="nextSlideOutfits()"
            >
              <mat-icon>chevron_right</mat-icon>
            </button>
          </div>
          
          <!-- Indicadores de posición para outfits -->
          <div class="flex justify-center gap-2 mt-5" *ngIf="outfitsFavoritos.length > itemsPerViewOutfits">
            <button 
              *ngFor="let slide of [].constructor(totalSlidesOutfits); let i = index"
              class="w-3 h-3 rounded-full border-0 transition-all duration-300 cursor-pointer"
              [ngClass]="{
                'bg-purple-500 transform scale-110': i === (currentSlideOutfits - 1),
                'bg-gray-300 hover:bg-gray-400': i !== (currentSlideOutfits - 1)
              }"
              (click)="goToSlideOutfits(i * itemsPerViewOutfits)"
            ></button>
          </div>
          
          <!-- Contador de elementos para outfits -->
          <div class="text-center mt-4 text-sm text-gray-600">
            Mostrando {{currentIndexOutfits + 1}}-{{Math.min(currentIndexOutfits + itemsPerViewOutfits, outfitsFavoritos.length)}} 
            de {{outfitsFavoritos.length}} outfits favoritos
          </div>
        </div>
        
      </div>
    </mat-tab>

  </mat-tab-group>
</div>
